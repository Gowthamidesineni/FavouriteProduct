{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nlet globalState = {};\nlet listeners = [];\nlet actions = {};\nexport const useStore = (shouldListen = true) => {\n  _s();\n  const setState = useState(globalState)[1];\n  const dispatch = (actionIdentifier, payload) => {\n    const newState = actions[actionIdentifier](globalState, payload);\n    globalState = {\n      ...globalState,\n      ...newState\n    };\n    for (const listener of listeners) {\n      listener(globalState);\n    }\n  };\n  useEffect(() => {\n    if (shouldListen) {\n      listeners.push(setState);\n    }\n    return () => {\n      if (shouldListen) {\n        listeners = listeners.filter(li => li !== setState);\n      }\n    };\n  }, [setState, shouldListen]);\n  return [globalState, dispatch];\n};\n_s(useStore, \"nM5W+84F396yCKDu4U2VhqiPF0o=\");\nexport const initStore = (userActions, initialState) => {\n  if (initialState) {\n    globalState = {\n      ...globalState,\n      ...initialState\n    };\n  }\n  actions = {\n    ...actions,\n    ...userActions\n  };\n};","map":{"version":3,"names":["useState","useEffect","globalState","listeners","actions","useStore","shouldListen","_s","setState","dispatch","actionIdentifier","payload","newState","listener","push","filter","li","initStore","userActions","initialState"],"sources":["/Users/desineni.gowthamithoughtworks.com/Documents/react learn/react-complete-guide-course-resources/code/27 Replacing Redux with Hooks/05-finished/src/hooks-store/store.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nlet globalState = {};\nlet listeners = [];\nlet actions = {};\n\nexport const useStore = (shouldListen = true) => {\n  const setState = useState(globalState)[1];\n\n  const dispatch = (actionIdentifier, payload) => {\n    const newState = actions[actionIdentifier](globalState, payload);\n    globalState = { ...globalState, ...newState };\n\n    for (const listener of listeners) {\n      listener(globalState);\n    }\n  };\n\n  useEffect(() => {\n    if (shouldListen) {\n      listeners.push(setState);\n    }\n\n    return () => {\n      if (shouldListen) {\n        listeners = listeners.filter(li => li !== setState);\n      }\n    };\n  }, [setState, shouldListen]);\n\n  return [globalState, dispatch];\n};\n\nexport const initStore = (userActions, initialState) => {\n  if (initialState) {\n    globalState = { ...globalState, ...initialState };\n  }\n  actions = { ...actions, ...userActions };\n};\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,IAAIC,WAAW,GAAG,CAAC,CAAC;AACpB,IAAIC,SAAS,GAAG,EAAE;AAClB,IAAIC,OAAO,GAAG,CAAC,CAAC;AAEhB,OAAO,MAAMC,QAAQ,GAAGA,CAACC,YAAY,GAAG,IAAI,KAAK;EAAAC,EAAA;EAC/C,MAAMC,QAAQ,GAAGR,QAAQ,CAACE,WAAW,CAAC,CAAC,CAAC,CAAC;EAEzC,MAAMO,QAAQ,GAAGA,CAACC,gBAAgB,EAAEC,OAAO,KAAK;IAC9C,MAAMC,QAAQ,GAAGR,OAAO,CAACM,gBAAgB,CAAC,CAACR,WAAW,EAAES,OAAO,CAAC;IAChET,WAAW,GAAG;MAAE,GAAGA,WAAW;MAAE,GAAGU;IAAS,CAAC;IAE7C,KAAK,MAAMC,QAAQ,IAAIV,SAAS,EAAE;MAChCU,QAAQ,CAACX,WAAW,CAAC;IACvB;EACF,CAAC;EAEDD,SAAS,CAAC,MAAM;IACd,IAAIK,YAAY,EAAE;MAChBH,SAAS,CAACW,IAAI,CAACN,QAAQ,CAAC;IAC1B;IAEA,OAAO,MAAM;MACX,IAAIF,YAAY,EAAE;QAChBH,SAAS,GAAGA,SAAS,CAACY,MAAM,CAACC,EAAE,IAAIA,EAAE,KAAKR,QAAQ,CAAC;MACrD;IACF,CAAC;EACH,CAAC,EAAE,CAACA,QAAQ,EAAEF,YAAY,CAAC,CAAC;EAE5B,OAAO,CAACJ,WAAW,EAAEO,QAAQ,CAAC;AAChC,CAAC;AAACF,EAAA,CAzBWF,QAAQ;AA2BrB,OAAO,MAAMY,SAAS,GAAGA,CAACC,WAAW,EAAEC,YAAY,KAAK;EACtD,IAAIA,YAAY,EAAE;IAChBjB,WAAW,GAAG;MAAE,GAAGA,WAAW;MAAE,GAAGiB;IAAa,CAAC;EACnD;EACAf,OAAO,GAAG;IAAE,GAAGA,OAAO;IAAE,GAAGc;EAAY,CAAC;AAC1C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}